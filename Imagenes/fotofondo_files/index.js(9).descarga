!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s=25)}([function(e,t){e.exports=IcbuIM.React16},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function o(r,i){try{var a=t[r](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var c,u,l=0,p={},d=n(20),f=n(21),m=n(22),h="enaliint",g={pageId:"",refer:"",logMsg:(u=s(regeneratorRuntime.mark((function e(t){var n,o,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.transferLoginId2AccountId(g.getLoginId()+","+t.toId);case 2:n=e.sent,o=i(n,2),r=o[0],a=o[1],g.dotStat(15576),g.dmtrackLog("webmessage",{fromuid:h+r,touid:h+(a||t.toId),from:1,msg_id:t.opId||"",scene_type:t.sceneType||"",id:t.productId,version:"new",email:g.getCookie("__AE")});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e){return u.apply(this,arguments)}),logMarket:(c=s(regeneratorRuntime.mark((function e(t,n){var o,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.transferLoginId2AccountId(g.getLoginId()+","+t.toId);case 2:o=e.sent,r=i(o,2),a=r[0],s=r[1],"1"==n.type?g.dmtrackLog("webmessagemarketing",{fromuid:h+a,touid:h+(s||t.toId),from:1,id:t.productId,version:"new",email:f.get("__AE")}):"2"==n.type&&g.dmtrackLog("webmessagemarketing2",{fromuid:h+a,touid:h+(s||t.toId),from:1,id:t.productId,version:"new",email:f.get("__AE")});case 7:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return c.apply(this,arguments)}),dmtrackLog:function(e,t){var n="atm_log_"+ ++l,o=new Image;t=r({},{step:e,pageid:g.pageId,refer:g.refer,randomId:l},t),window[n]=o,o.onload=function(){try{window[n]=null,delete window[n]}catch(e){}this.onload=null},o.src="//gm.mmstat.com/sc.migrate.atm?gmkey=&logtype=2&gokey="+encodeURIComponent(g.genQuery(t))},atmLog:function(e,t){var n="//atmgateway-client.alibaba.com/atmgateway/http/"+e+".do",o="atm_log_"+ ++l,r=new Image;window[o]=r,r.onload=function(){try{window[o]=null,delete window[o]}catch(e){}this.onload=null},r.src=n+"?"+g.genQuery(t)},dotStat:function(e){window.dmtrack&&window.dmtrack.dotstat(e)},genQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=function(e,t){return null!==t?e+"="+encodeURIComponent(t):""},o=Object.entries(e).map((function(e){var o=i(e,2),r=o[0],s=o[1];return Array.isArray(s)?s.map((function(e){return g.genQuery(a({},t+r,e))})).join("&"):g.isObject(s)?g.genQuery(s,t+(r+".")):n(t+""+r,s)}));return o.join("&")},isObject:function(e){return"object"===("undefined"===typeof e?"undefined":o(e))&&null!==e},getDecMemberId:function(e){return new Promise((function(t,n){if(/^enaliint/.test(e))t(e);else if(e in p)t(p[e]);else{d("//wwatmserver.alibaba.com/GetDecEnemberId.do?enemberId="+e).then((function(e){return e.json})).then((function(n){p[e]=n.result,t(n.result)})).catch((function(e){n(e)}))}}))},getCookie:function(e){return f.get(e)},getAccountId:function(){var e=/xman_us_f=*.+?(x_user=*.+?)[&;]/.exec(document.cookie),t=e&&e[1]&&e[1].slice(7)||"",n=t&&t.split("|")||[];return 1*n[n.length-1]},getLoginId:function(){var e=f.get("ali_apache_track"),t="";return"string"===typeof e&&(e.match(/mid=([^&"]+)/),t=RegExp.$1),t}};t.default=g,e.exports=t.default},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var o=n(19);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var o=n(9).default,r=n(1);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?r(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=IcbuIM.classnames},function(e,t){function n(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}e.exports=function(e){return function(){var t=this,o=arguments;return new Promise((function(r,i){var a=e.apply(t,o);function s(e){n(a,r,i,s,c,"next",e)}function c(e){n(a,r,i,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var o=n(18);e.exports=function(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=IcbuIM.ReactDOM16},function(e,t){e.exports=IcbuIM.Next1.Dialog},function(e,t){e.exports=IcbuIM.Next1.Button},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=t.isBuyerPWA=location.pathname.indexOf("messengerAlone.htm")>=0,r=t.isSellerPWA=location.pathname.indexOf("weblitePWA.htm")>=0,i=t.isPureMessenger=location.pathname.indexOf("messenger.htm")>=0||location.pathname.indexOf("messengerShadow.htm")>=0,a=t.isPureWeblite=location.pathname.indexOf("weblite.htm")>=0,s=t.isWebATM=location.pathname.indexOf("webATM.htm")>=0;t.isWeblite=a||s,t.isMessenger=o||r||i,t.isSeller=r||location.pathname.indexOf("maDetail")>=0},function(e,t){e.exports=IcbuIM.Next1.Icon},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,o)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var o,r,i;r=[t,e],void 0===(i="function"===typeof(o=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function o(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=e,s=t.timeout||n.timeout,c=t.jsonpCallback||n.jsonpCallback,u=void 0;return new Promise((function(n,l){var p=t.jsonpCallbackFunction||o(),d=c+"_"+p;window[p]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),i(d),r(p)},a+=-1===a.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+a+c+"="+p),t.charset&&f.setAttribute("charset",t.charset),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),u=setTimeout((function(){l(new Error("JSONP request to "+e+" timed out")),r(p),i(d),window[p]=function(){r(p)}}),s),f.onerror=function(){l(new Error("JSONP request to "+e+" failed")),r(p),i(d),u&&clearTimeout(u)}}))}t.exports=a})?o.apply(t,r):o)||(e.exports=i)},function(e,t){var n=t,o=decodeURIComponent,r=encodeURIComponent;function i(e){return"string"===typeof e}function a(e){return i(e)&&""!==e}function s(e){if(!a(e))throw new TypeError("Cookie name must be a non-empty string")}function c(e){return e}n.get=function(e,t){s(e),t="function"===typeof t?{converter:t}:t||{};var n=function(e,t){var n={};if(i(e)&&e.length>0)for(var r,a,s,u=t?o:c,l=e.split(/;\s/g),p=0,d=l.length;p<d;p++){if((s=l[p].match(/([^=]+)=/i))instanceof Array)try{r=o(s[1]),a=u(l[p].substring(s[1].length+1))}catch(e){}else r=o(l[p]),a="";r&&(n[r]=a)}return n}(document.cookie,!t.raw);return(t.converter||c)(n[e])},n.set=function(e,t,n){s(e);var o=(n=n||{}).expires,i=n.domain,c=n.path;n.raw||(t=r(String(t)));var u=e+"="+t,l=o;return"number"===typeof l&&(l=new Date).setDate(l.getDate()+o),l instanceof Date&&(u+="; expires="+l.toUTCString()),a(i)&&(u+="; domain="+i),a(c)&&(u+="; path="+c),n.secure&&(u+="; secure"),document.cookie=u,u},n.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.transferLoginId2AccountId=function(e){return r("mtop.alibaba.icbu.im.id.get",{type:"LOGIN_ID",ids:e}).then((function(e){var t=e.data;return t&&t.object?t.object.map((function(e){return e.aliMemberId})):null})).catch((function(){return null}))};var o=n(23);function r(e,t){return o.request({api:e,v:"1.0",appKey:"21574054",data:t,dataType:"json",ecode:1}).catch((function(e){e.ret&&alert(e.ret[0])}))}o.config.mainDomain="alibaba.com",o.config.subDomain="h",o.config.prefix=window.mtopServerDomain||"acs"},function(e,t){"undefined"===typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),function(e,t){function n(){var e={},t=new l((function(t,n){e.resolve=t,e.reject=n}));return e.promise=t,e}function o(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function r(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function i(e){return"[object Object]"=={}.toString.call(e)}function a(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function s(e,t,n){var o=new Date;o.setTime(o.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+o.toGMTString(),document.cookie=e+"=;path=/;domain=."+n+"."+t+";expires="+o.toGMTString()}function c(e,t){for(var n=e.split("."),o=t.split("."),r=0;3>r;r++){var i=Number(n[r]),a=Number(o[r]);if(i>a)return 1;if(a>i)return-1;if(!isNaN(i)&&isNaN(a))return 1;if(isNaN(i)&&!isNaN(a))return-1}return 0}function u(e){this.id=""+(new Date).getTime()+ ++v,this.params=o(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=f.slice(0)}var l=e.Promise,p=(l||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var d={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},f=[],m={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var t=e.location.hostname;if(!t){var n=e.parent.location.hostname;n&&~n.indexOf("zebra.alibaba-inc.com")&&(t=n)}var o=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),r=t.match(o)||[],i=r[2]||"taobao.com",a=r[1]||"m";"taobao.net"!==i||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===i&&"demo"===a?a="demo":"alibaba-inc.com"===i&&"zebra"===a?a="zebra":"waptest"!==a&&"wapa"!==a&&"m"!==a&&(a="m"):a="waptest";var s="h5api";"taobao.net"===i&&"waptest"===a&&(s="acs"),d.mainDomain=i,d.subDomain=a,d.prefix=s})(),function(){var t=e.navigator.userAgent,n=t.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(d.WindVaneVersion=n[1]);var o=t.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);o&&(d.AliAppName=o[1],d.AliAppVersion=o[2]);var r=t.match(/AMapClient\/([\d\.\_]+)/i);r&&(d.AliAppName="AMAP",d.AliAppVersion=r[1])}();var h=/[Android|Adr]/.test(e.navigator.userAgent),g="AP"===d.AliAppName&&c(d.AliAppVersion,"10.1.2")>=0||"KB"===d.AliAppName&&c(d.AliAppVersion,"7.1.62")>=0||h&&"AMAP"===d.AliAppName&&c(d.AliAppVersion,"1.0.1")>=0,v=0;u.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},u.prototype.__processRequestMethod=function(e){var t=this.params,n=this.options;"get"===t.type&&"jsonp"===t.dataType?n.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?n.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?n.getJSON=!0:"post"===t.type&&(n.postJSON=!0),e()},u.prototype.__processRequestType=function(n){var o=this,r=this.params,a=this.options;if(!0===d.H5Request&&(a.H5Request=!0),!0===d.WindVaneRequest&&(a.WindVaneRequest=!0),!1===a.H5Request&&!0===a.WindVaneRequest){if(!g&&(!t.windvane||parseFloat(a.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境");if(g&&!e.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::支付宝通道未准备好，支付宝请见 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===a.H5Request)a.WindVaneRequest=!1;else if("undefined"==typeof a.WindVaneRequest&&"undefined"==typeof a.H5Request){if(t.windvane&&parseFloat(a.WindVaneVersion)>=5.4?a.WindVaneRequest=!0:a.H5Request=!0,g){if(a.WindVaneRequest=a.H5Request=void 0,e.AlipayJSBridge)if(i(r.data))a.WindVaneRequest=!0;else try{i(JSON.parse(r.data))?a.WindVaneRequest=!0:a.H5Request=!0}catch(e){a.H5Request=!0}else a.H5Request=!0;"AMAP"!==d.AliAppName||r.useNebulaJSbridgeWithAMAP||(a.WindVaneRequest=a.H5Request=void 0,a.H5Request=!0)}window.self!==window.top&&(a.H5Request=!0)}var s=e.navigator.userAgent.toLowerCase();return s.indexOf("youku")>-1&&a.mainDomain.indexOf("youku.com")<0&&(a.WindVaneRequest=!1,a.H5Request=!0),a.mainDomain.indexOf("youku.com")>-1&&s.indexOf("youku")<0&&(a.WindVaneRequest=!1,a.H5Request=!0),n?n().then((function(){var e=a.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===a.WindVaneRequest&&g&&a.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!g||!isNaN(a.retJson.error)||-1!==a.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return g&&i(r.data)&&(r.data=JSON.stringify(r.data)),d.H5Request=!0,o.__sequence([o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest]);"undefined"==typeof a.retJson.api&&"undefined"==typeof a.retJson.v&&(a.retJson.api=r.api,a.retJson.v=r.v,a.retJson.ret=[a.retJson.error+"::"+a.retJson.errorMessage],a.retJson.data={})}})):void 0};var y="_m_h5_c",b="_m_h5_tk";u.prototype.__getTokenFromAlipay=function(){var t=n(),o=this.options,r=(e.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===o.useAlipayJSBridge&&!r&&g&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",(function(e){e&&e.token&&(o.token=e.token),t.resolve()}),(function(){t.resolve()})):t.resolve(),t.promise},u.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&a(y)?e.token=a(y).split(";")[0]:e.token=e.token||a(b),e.token&&(e.token=e.token.split("_")[0]),l.resolve()},u.prototype.__waitWKWebViewCookie=function(t){var n=this.options;n.waitWKWebViewCookieFn&&n.H5Request&&e.webkit&&e.webkit.messageHandlers?n.waitWKWebViewCookieFn(t):t()},u.prototype.__processToken=function(e){var t=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?p.then((function(){return t.__getTokenFromAlipay()})).then((function(){return t.__getTokenFromCookie()})).then(e).then((function(){var e=n.retJson,o=e.ret;if(o instanceof Array&&(o=o.join(",")),o.indexOf("TOKEN_EMPTY")>-1||(!0===n.CDR||!0===n.syncCookieMode)&&o.indexOf("ILLEGAL_ACCESS")>-1||o.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes){var r=[t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest];if(!0===n.syncCookieMode&&t.constructor.__cookieProcessorId!==t.id)if(t.constructor.__cookieProcessor){r=[function(e){var n=function(){t.constructor.__cookieProcessor=null,t.constructor.__cookieProcessorId=null,e()};t.constructor.__cookieProcessor?t.constructor.__cookieProcessor.then(n).catch(n):e()},t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]}else t.constructor.__cookieProcessor=t.__requestProcessor,t.constructor.__cookieProcessorId=t.id;return t.__sequence(r)}n.maxRetryTimes>0&&(s(y,n.pageDomain,"*"),s(b,n.mainDomain,n.subDomain),s("_m_h5_tk_enc",n.mainDomain,n.subDomain)),e.retType=m.TOKEN_EXPIRED}})):void e()},u.prototype.__processRequestUrl=function(t){var n=this.params,o=this.options;if(o.hostSetting&&o.hostSetting[e.location.hostname]){var r=o.hostSetting[e.location.hostname];r.prefix&&(o.prefix=r.prefix),r.subDomain&&(o.subDomain=r.subDomain),r.mainDomain&&(o.mainDomain=r.mainDomain)}if(!0===o.H5Request){var i="//"+(o.prefix?o.prefix+".":"")+(o.subDomain?o.subDomain+".":"")+o.mainDomain+"/h5/"+n.api.toLowerCase()+"/"+n.v.toLowerCase()+"/",a=n.appKey||("waptest"===o.subDomain?"4272":"12574478"),s=(new Date).getTime(),c=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,o,r,i,a;return r=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(o=1073741824&t)?2147483648^a^r^i:n|o?1073741824&a?3221225472^a^r^i:1073741824^a^r^i:a^r^i}function o(e,o,r,i,a,s,c){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(o,r,i),a),c)),n(t(e,s),o)}function r(e,o,r,i,a,s,c){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(o,r,i),a),c)),n(t(e,s),o)}function i(e,o,r,i,a,s,c){return e=n(e,n(n(function(e,t,n){return e^t^n}(o,r,i),a),c)),n(t(e,s),o)}function a(e,o,r,i,a,s,c){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(o,r,i),a),c)),n(t(e,s),o)}function s(e){var t,n="",o="";for(t=0;3>=t;t++)n+=(o="0"+(e>>>8*t&255).toString(16)).substr(o.length-2,2);return n}var c,u,l,p,d,f,m,h,g,v;for(v=function(e){for(var t,n=e.length,o=n+8,r=16*((o-o%64)/64+1),i=new Array(r-1),a=0,s=0;n>s;)a=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<a,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e)),f=1732584193,m=4023233417,h=2562383102,g=271733878,c=0;c<v.length;c+=16)u=f,l=m,p=h,d=g,f=o(f,m,h,g,v[c+0],7,3614090360),g=o(g,f,m,h,v[c+1],12,3905402710),h=o(h,g,f,m,v[c+2],17,606105819),m=o(m,h,g,f,v[c+3],22,3250441966),f=o(f,m,h,g,v[c+4],7,4118548399),g=o(g,f,m,h,v[c+5],12,1200080426),h=o(h,g,f,m,v[c+6],17,2821735955),m=o(m,h,g,f,v[c+7],22,4249261313),f=o(f,m,h,g,v[c+8],7,1770035416),g=o(g,f,m,h,v[c+9],12,2336552879),h=o(h,g,f,m,v[c+10],17,4294925233),m=o(m,h,g,f,v[c+11],22,2304563134),f=o(f,m,h,g,v[c+12],7,1804603682),g=o(g,f,m,h,v[c+13],12,4254626195),h=o(h,g,f,m,v[c+14],17,2792965006),f=r(f,m=o(m,h,g,f,v[c+15],22,1236535329),h,g,v[c+1],5,4129170786),g=r(g,f,m,h,v[c+6],9,3225465664),h=r(h,g,f,m,v[c+11],14,643717713),m=r(m,h,g,f,v[c+0],20,3921069994),f=r(f,m,h,g,v[c+5],5,3593408605),g=r(g,f,m,h,v[c+10],9,38016083),h=r(h,g,f,m,v[c+15],14,3634488961),m=r(m,h,g,f,v[c+4],20,3889429448),f=r(f,m,h,g,v[c+9],5,568446438),g=r(g,f,m,h,v[c+14],9,3275163606),h=r(h,g,f,m,v[c+3],14,4107603335),m=r(m,h,g,f,v[c+8],20,1163531501),f=r(f,m,h,g,v[c+13],5,2850285829),g=r(g,f,m,h,v[c+2],9,4243563512),h=r(h,g,f,m,v[c+7],14,1735328473),f=i(f,m=r(m,h,g,f,v[c+12],20,2368359562),h,g,v[c+5],4,4294588738),g=i(g,f,m,h,v[c+8],11,2272392833),h=i(h,g,f,m,v[c+11],16,1839030562),m=i(m,h,g,f,v[c+14],23,4259657740),f=i(f,m,h,g,v[c+1],4,2763975236),g=i(g,f,m,h,v[c+4],11,1272893353),h=i(h,g,f,m,v[c+7],16,4139469664),m=i(m,h,g,f,v[c+10],23,3200236656),f=i(f,m,h,g,v[c+13],4,681279174),g=i(g,f,m,h,v[c+0],11,3936430074),h=i(h,g,f,m,v[c+3],16,3572445317),m=i(m,h,g,f,v[c+6],23,76029189),f=i(f,m,h,g,v[c+9],4,3654602809),g=i(g,f,m,h,v[c+12],11,3873151461),h=i(h,g,f,m,v[c+15],16,530742520),f=a(f,m=i(m,h,g,f,v[c+2],23,3299628645),h,g,v[c+0],6,4096336452),g=a(g,f,m,h,v[c+7],10,1126891415),h=a(h,g,f,m,v[c+14],15,2878612391),m=a(m,h,g,f,v[c+5],21,4237533241),f=a(f,m,h,g,v[c+12],6,1700485571),g=a(g,f,m,h,v[c+3],10,2399980690),h=a(h,g,f,m,v[c+10],15,4293915773),m=a(m,h,g,f,v[c+1],21,2240044497),f=a(f,m,h,g,v[c+8],6,1873313359),g=a(g,f,m,h,v[c+15],10,4264355552),h=a(h,g,f,m,v[c+6],15,2734768916),m=a(m,h,g,f,v[c+13],21,1309151649),f=a(f,m,h,g,v[c+4],6,4149444226),g=a(g,f,m,h,v[c+11],10,3174756917),h=a(h,g,f,m,v[c+2],15,718787259),m=a(m,h,g,f,v[c+9],21,3951481745),f=n(f,u),m=n(m,l),h=n(h,p),g=n(g,d);return(s(f)+s(m)+s(h)+s(g)).toLowerCase()}(o.token+"&"+s+"&"+a+"&"+n.data),u={jsv:"2.6.1",appKey:a,t:s,sign:c},l={data:n.data,ua:n.ua};Object.keys(n).forEach((function(e){"undefined"==typeof u[e]&&"undefined"==typeof l[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(u[e]=n[e])})),n.ext_querys&&Object.keys(n.ext_querys).forEach((function(e){u[e]=n.ext_querys[e]})),o.getJSONP?u.type="jsonp":o.getOriginalJSONP?u.type="originaljsonp":(o.getJSON||o.postJSON)&&(u.type="originaljson"),"undefined"!=typeof n.valueType&&("original"===n.valueType?o.getJSONP||o.getOriginalJSONP?u.type="originaljsonp":(o.getJSON||o.postJSON)&&(u.type="originaljson"):"string"===n.valueType&&(o.getJSONP||o.getOriginalJSONP?u.type="jsonp":(o.getJSON||o.postJSON)&&(u.type="json"))),!0===o.useJsonpResultType&&"originaljson"===u.type&&delete u.type,o.dangerouslySetProtocol&&(i=o.dangerouslySetProtocol+":"+i),o.querystring=u,o.postdata=l,o.path=i}t()},u.prototype.__processUnitPrefix=function(e){e()};var w=0;u.prototype.__requestJSONP=function(e){function t(e){if(u&&clearTimeout(u),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===e)window[c]=function(){window[c]=void 0;try{delete window[c]}catch(e){}};else{window[c]=void 0;try{delete window[c]}catch(e){}}}var o=n(),i=this.params,a=this.options,s=i.timeout||2e4,c="mtopjsonp"+(i.jsonpIncPrefix||"")+ ++w,u=setTimeout((function(){e(a.timeoutErrMsg||"TIMEOUT::接口超时"),t("TIMEOUT")}),s);a.querystring.callback=c;var l=document.createElement("script");return l.src=a.path+"?"+r(a.querystring)+"&"+r(a.postdata),l.async=!0,l.onerror=function(){t("ABORT"),e(a.abortErrMsg||"ABORT::接口异常退出")},window[c]=function(){a.results=Array.prototype.slice.call(arguments),t(),o.resolve()},function(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}(l),o.promise},u.prototype.__requestJSON=function(t){function o(e){p&&clearTimeout(p),"TIMEOUT"===e&&u.abort()}var i=n(),s=this.params,c=this.options,u=new e.XMLHttpRequest,l=s.timeout||2e4,p=setTimeout((function(){t(c.timeoutErrMsg||"TIMEOUT::接口超时"),o("TIMEOUT")}),l);c.CDR&&a(y)&&(c.querystring.c=decodeURIComponent(a(y))),u.onreadystatechange=function(){if(4==u.readyState){var e,n,r=u.status;if(r>=200&&300>r||304==r){o(),e=u.responseText,n=u.getAllResponseHeaders()||"";try{(e=/^\s*$/.test(e)?{}:JSON.parse(e)).responseHeaders=n,c.results=[e],i.resolve()}catch(e){t("PARSE_JSON_ERROR::解析JSON失败")}}else o("ABORT"),t(c.abortErrMsg||"ABORT::接口异常退出")}};var d,f,m=c.path+"?"+r(c.querystring);c.getJSON?(d="GET",m+="&"+r(c.postdata)):c.postJSON&&(d="POST",f=r(c.postdata)),u.open(d,m,!0),u.withCredentials=!0,u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-type","application/x-www-form-urlencoded");var h=s.ext_headers||s.headers;if(h)for(var g in h)u.setRequestHeader(g,h[g]);return u.send(f),i.promise},u.prototype.__requestWindVane=function(e){function o(e){a.results=[e],r.resolve()}var r=n(),i=this.params,a=this.options,s=i.data,c=i.api,u=i.v,l=a.postJSON?1:0,p=a.getJSON||a.postJSON||a.getOriginalJSONP?"originaljson":"";"undefined"!=typeof i.valueType&&("original"===i.valueType?p="originaljson":"string"===i.valueType&&(p="")),!0===a.useJsonpResultType&&(p="");var d,f,m="https"===location.protocol?1:0,h=i.isSec||0,g=i.sessionOption||"AutoLoginOnly",v=i.ecode||0,y=i.ext_headers||{},b=i.ext_querys||{};d=2*(f="undefined"!=typeof i.timer?parseInt(i.timer):"undefined"!=typeof i.timeout?parseInt(i.timeout):2e4),!0===i.needLogin&&"undefined"==typeof i.sessionOption&&(g="AutoLoginAndManualLogin"),"undefined"!=typeof i.secType&&"undefined"==typeof i.isSec&&(h=i.secType);var w={api:c,v:u,post:String(l),type:p,isHttps:String(m),ecode:String(v),isSec:String(h),param:JSON.parse(s),timer:f,sessionOption:g,ext_headers:y,ext_querys:b};i.ttid&&!0===a.dangerouslySetWVTtid&&(w.ttid=i.ttid),Object.assign&&i.dangerouslySetWindvaneParams&&Object.assign(w,i.dangerouslySetWindvaneParams);var _="MtopWVPlugin";return"string"==typeof i.customWindVaneClassName&&(_=i.customWindVaneClassName),t.windvane.call(_,"send",w,o,o,d),r.promise},u.prototype.__requestAlipay=function(t){var o=n(),r=this.params,a=this.options,s={apiName:r.api,apiVersion:r.v,needEcodeSign:"1"===String(r.ecode),headers:r.ext_headers||{},usePost:!!a.postJSON};i(r.data)||(r.data=JSON.parse(r.data)),s.data=r.data,r.ttid&&!0===a.dangerouslySetWVTtid&&(s.ttid=r.ttid),(a.getJSON||a.postJSON||a.getOriginalJSONP)&&(s.type="originaljson"),"undefined"!=typeof r.valueType&&("original"===r.valueType?s.type="originaljson":"string"===r.valueType&&delete s.type),!0===a.useJsonpResultType&&delete s.type,Object.assign&&r.dangerouslySetAlipayParams&&Object.assign(s,r.dangerouslySetAlipayParams);var c="mtop";return"string"==typeof r.customAlipayJSBridgeApi&&(c=r.customAlipayJSBridgeApi),e.AlipayJSBridge.call(c,s,(function(e){a.results=[e],o.resolve()})),o.promise},u.prototype.__processRequest=function(e,t){var n=this;return p.then((function(){var e=n.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return n.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return n.__requestJSON(t);if(e.WindVaneRequest)return g?n.__requestAlipay(t):n.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")})).then(e).then((function(){var e=n.options,t=(n.params,e.results[0]),o=t&&t.ret||[];t.ret=o,o instanceof Array&&(o=o.join(","));var r=t.c;e.CDR&&r&&function(e,t,n){var o=n||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(o.domain?";domain="+o.domain:"")+(o.path?";path="+o.path:"")+(o.secure?";secure":"")+(o.httponly?";HttpOnly":"")+(o.sameSite?";Samesite="+o.sameSite:"")}(y,r,{domain:e.pageDomain,path:"/",secure:e.secure,sameSite:e.sameSite}),o.indexOf("SUCCESS")>-1?t.retType=m.SUCCESS:t.retType=m.ERROR,e.retJson=t}))},u.prototype.__sequence=function(e){var t=this,o=[],r=[];e.forEach((function e(i){if(i instanceof Array)i.forEach(e);else{var a,s=n(),c=n();o.push((function(){return s=n(),(a=i.call(t,(function(e){return s.resolve(e),c.promise}),(function(e){return s.reject(e),c.promise})))&&(a=a.catch((function(e){s.reject(e)}))),s.promise})),r.push((function(e){return c.resolve(e),a}))}}));for(var i,a=p;i=o.shift();)a=a.then(i);for(;i=r.pop();)a=a.then(i);return a};var _=function(e){e()},O=function(e){e()};u.prototype.request=function(n){var r=this;if(this.options=o(n||{},d),!l){var i="当前浏览器不支持Promise，请在windows对象上挂载Promise对象";throw t.mtop={ERROR:i},new Error(i)}var a=l.resolve([_,O]).then((function(e){var t=e[0],n=e[1];return r.__sequence([t,r.__processRequestMethod,r.__processRequestType,r.__processToken,r.__processRequestUrl,r.middlewares,r.__processRequest,n])})).then((function(){var e=r.options.retJson;return e.retType!==m.SUCCESS?l.reject(e):r.options.successCallback?void r.options.successCallback(e):l.resolve(e)})).catch((function(e){var n;return e instanceof Error?(console.error(e.stack),n={ret:[e.message],stack:[e.stack],retJson:m.ERROR}):n="string"==typeof e?{ret:[e],retJson:m.ERROR}:void 0!==e?e:r.options.retJson,t.mtop.errorListener&&t.mtop.errorListener({api:r.params.api,data:r.params.data,v:r.params.v,retJson:n}),r.options.failureCallback?void r.options.failureCallback(n):l.reject(n)}));return this.__processRequestType(),r.options.H5Request&&(r.constructor.__firstProcessor||(r.constructor.__firstProcessor=a),_=function(e){r.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(n.pageDomain=n.pageDomain||function(e){try{return".com"!==e.substring(e.lastIndexOf("."))?(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join("."):e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}(e.location.hostname),n.mainDomain!==n.pageDomain&&(n.maxRetryTimes=4,n.CDR=!0)),this.__requestProcessor=a,a},t.mtop=function(e){return new u(e)},t.mtop.request=function(e,t,n){var o={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:n||t};return new u(e).request(o)},t.mtop.H5Request=function(e,t,n){var o={H5Request:!0,successCallback:t,failureCallback:n||t};return new u(e).request(o)},t.mtop.middlewares=f,t.mtop.config=d,t.mtop.RESPONSE_TYPE=m,t.mtop.CLASS=u}(window,window.lib||(window.lib={})),function(e,t){function n(e){return e.preventDefault(),!1}function o(t,o){var r=this,i=e.dpr||1,a=document.createElement("div"),s=document.documentElement.getBoundingClientRect(),c=Math.max(s.width,window.innerWidth)/i,u=Math.max(s.height,window.innerHeight)/i;a.style.cssText=["-webkit-transform:scale("+i+") translateZ(0)","-ms-transform:scale("+i+") translateZ(0)","transform:scale("+i+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+c+"px","height:"+u+"px","z-index:2147483647","position:"+(c>800?"fixed":"absolute"),"left:0","top:0px","background:"+(c>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var l=document.createElement("div");l.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),l.innerText=t;var p=navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i),d=document.createElement("img");d.style.cssText=["display:block","position:absolute","margin-top:15px","right:0","top:0","height:15px","line-height:52px","padding:0 20px","color:#999"].join(";"),d.src="https://gw.alicdn.com/tfs/TB1QZN.CYj1gK0jSZFuXXcrHpXa-200-200.png";var f=document.createElement("iframe");f.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),p?(l.appendChild(d),a.appendChild(l)):(d.style.cssText=["position:absolute","width:15px","height:15px","top:102px","left:"+(c/2-185+390)+"px","cursor: pointer","border:0","z-index:1","overflow:hidden"].join(";"),a.appendChild(d),f.style.cssText=["position:absolute","top:92px","left:"+(c/2-185)+"px","width:420px","height:320px","border:0","background:#FFF","overflow:hidden"].join(";")),a.appendChild(f),a.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(a),f.src=o,d.addEventListener("click",(function(){r.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),a.dispatchEvent(e)}),!1),this.addEventListener=function(){a.addEventListener.apply(a,arguments)},this.removeEventListener=function(){a.removeEventListener.apply(a,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),a.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-s.top),a.parentNode&&a.parentNode.removeChild(a)}}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop 初始化失败！");var r=e.Promise,i=t.mtop.CLASS,a=t.mtop.config,s=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push((function(e){var n=this,o=this.options,r=this.params;return e().then((function(){var e=o.retJson,i=e.ret,c=navigator.userAgent.toLowerCase(),u=c.indexOf("safari")>-1&&c.indexOf("chrome")<0&&c.indexOf("qqbrowser")<0;if(i instanceof Array&&(i=i.join(",")),(i.indexOf("SESSION_EXPIRED")>-1||i.indexOf("SID_INVALID")>-1||i.indexOf("AUTH_REJECT")>-1||i.indexOf("NEED_LOGIN")>-1)&&(e.retType=s.SESSION_EXPIRED,!o.WindVaneRequest&&(!0===a.LoginRequest||!0===o.LoginRequest||!0===r.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(!0!==o.safariGoLogin||!u||"taobao.com"===o.pageDomain)return t.login.goLoginAsync().then((function(e){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])})).catch((function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")}));t.login.goLogin()}}))})),t.mtop.loginRequest=function(e,t,n){var o={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:n||t};return new i(e).request(o)},t.mtop.antiFloodRequest=function(e,t,n){var o={AntiFlood:!0,successCallback:t,failureCallback:n||t};return new i(e).request(o)},t.mtop.middlewares.push((function(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==a.AntiFlood&&!0!==t.AntiFlood?void e():e().then((function(){var e=t.retJson,n=e.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)}))})),t.mtop.antiCreepRequest=function(e,t,n){var o={AntiCreep:!0,successCallback:t,failureCallback:n||t};return new i(e).request(o)},t.mtop.middlewares.push((function(t){var n=this,i=this.options,s=this.params;return!1!==i.AntiCreep&&(i.AntiCreep=!0),!0!==s.forceAntiCreep&&!0!==i.H5Request||!0!==a.AntiCreep&&!0!==i.AntiCreep?void t():t().then((function(){var t=i.retJson,a=t.ret;if(a instanceof Array&&(a=a.join(",")),(a.indexOf("RGV587_ERROR::SM")>-1||a.indexOf("ASSIST_FLAG")>-1)&&t.data.url){var c="_m_h5_smt",u=function(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}(c),l=!1;if(!0===i.saveAntiCreepToken&&u)for(var p in u=JSON.parse(u))s[p]&&(l=!0);if(!0===i.saveAntiCreepToken&&u&&!l){for(var p in u)s[p]=u[p];return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}return new r((function(r,a){function u(){p.removeEventListener("close",u),e.removeEventListener("message",l),a("USER_INPUT_CANCEL::用户取消输入")}function l(t){var o;try{o=JSON.parse(t.data)||{}}catch(e){}if(o&&"child"===o.type){var d;p.removeEventListener("close",u),e.removeEventListener("message",l),p.hide();try{for(var f in"string"==typeof(d=JSON.parse(decodeURIComponent(o.content)))&&(d=JSON.parse(d)),d)s[f]=d[f];!0===i.saveAntiCreepToken?(document.cookie=c+"="+JSON.stringify(d)+";",e.location.reload()):n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(r)}catch(e){a("USER_INPUT_FAILURE::用户输入失败")}}}var p=new o("",t.data.url);p.addEventListener("close",u,!1),e.addEventListener("message",l,!1),p.show()}))}}))}))}(window,window.lib||(window.lib={})),e.exports=window.lib.mtop},,function(e,t,n){"use strict";n.r(t);var o=n(12),r=n.n(o),i=n(11),a=n.n(i),s=n(5),c=n.n(s),u=n(6),l=n.n(u),p=n(1),d=n.n(p),f=n(7),m=n.n(f),h=n(8),g=n.n(h),v=n(4),y=n.n(v),b=n(2),w=n.n(b),_=n(0),O=n.n(_),E=function(){return(E=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function A(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function P(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var S,T=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isActive=u,t.isntActive=function(e){return!u(e)},t.isLoaded=l,t.isntLoaded=function(e){return!l(e)},t.shouldBeActive=function(e){try{return e.activeWhen(window.location)}catch(t){(0,o.handleAppError)(t,e),e.status=c}},t.shouldntBeActive=function(e){try{return!e.activeWhen(window.location)}catch(t){(0,o.handleAppError)(t,e),e.status=c}},t.notBootstrapped=function(e){return e.status!==a},t.notSkipped=function(e){return e!==c&&(!e||e.status!==c)},t.toName=function(e){return e.name},t.SKIP_BECAUSE_BROKEN=t.UNLOADING=t.UNMOUNTING=t.UPDATING=t.MOUNTED=t.MOUNTING=t.NOT_MOUNTED=t.BOOTSTRAPPING=t.NOT_BOOTSTRAPPED=t.LOADING_SOURCE_CODE=t.NOT_LOADED=void 0;var o=n(1);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}t.default=e}(n(9));var r="NOT_LOADED";t.NOT_LOADED=r;var i="LOADING_SOURCE_CODE";t.LOADING_SOURCE_CODE=i;var a="NOT_BOOTSTRAPPED";t.NOT_BOOTSTRAPPED=a,t.BOOTSTRAPPING="BOOTSTRAPPING",t.NOT_MOUNTED="NOT_MOUNTED",t.MOUNTING="MOUNTING";var s="MOUNTED";t.MOUNTED=s,t.UPDATING="UPDATING",t.UNMOUNTING="UNMOUNTING",t.UNLOADING="UNLOADING";var c="SKIP_BECAUSE_BROKEN";function u(e){return e.status===s}function l(e){return e.status!==r&&e.status!==i}t.SKIP_BECAUSE_BROKEN=c},function(e,t,n){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.handleAppError=function(e,t){var n=i(e,t);r.length?r.forEach((function(e){return e(n)})):setTimeout((function(){throw n}))},t.addErrorHandler=function(e){if("function"!=typeof e)throw new Error("a single-spa error handler must be a function");r.push(e)},t.removeErrorHandler=function(e){if("function"!=typeof e)throw new Error("a single-spa error handler must be a function");var t=!1;return r=r.filter((function(n){var o=n===e;return t=t||o,!o})),t},t.transformErr=i,(o=n(8))&&o.__esModule;var r=[];function i(e,t){var n,o=t.unmountThisParcel?"Parcel":"Application",r="".concat(o," '").concat(t.name,"' died in status ").concat(t.status,": ");if(e instanceof Error){try{e.message=r+e.message}catch(e){}n=e}else{console.warn("While ".concat(t.status,", '").concat(t.name,"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."));try{n=new Error(r+JSON.stringify(e))}catch(t){n=e}}return n.appName=t.name,n.name=t.name,n}},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.setBootstrapMaxTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof e||e<=0)throw new Error("bootstrap max time must be a positive integer number of milliseconds");r.bootstrap={millis:e,dieOnTimeout:t}},t.setMountMaxTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof e||e<=0)throw new Error("mount max time must be a positive integer number of milliseconds");r.mount={millis:e,dieOnTimeout:t}},t.setUnmountMaxTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof e||e<=0)throw new Error("unmount max time must be a positive integer number of milliseconds");r.unmount={millis:e,dieOnTimeout:t}},t.setUnloadMaxTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof e||e<=0)throw new Error("unload max time must be a positive integer number of milliseconds");r.unload={millis:e,dieOnTimeout:t}},t.reasonableTime=function(e,t,n){var o=1e3;return new Promise((function(r,i){var a=!1,s=!1;function c(e){if(!a)if(!0===e)s=!0,n.dieOnTimeout?i("".concat(t," did not resolve or reject for ").concat(n.millis," milliseconds")):console.error("".concat(t," did not resolve or reject for ").concat(n.millis," milliseconds -- we're no longer going to warn you about it."));else if(!s){var r=e,u=r*o;console.warn("".concat(t," did not resolve or reject within ").concat(u," milliseconds")),u+o<n.millis&&setTimeout((function(){return c(r+1)}),o)}}e.then((function(e){a=!0,r(e)})).catch((function(e){a=!0,i(e)})),setTimeout((function(){return c(1)}),o),setTimeout((function(){return c(!0)}),n.millis)}))},t.ensureValidAppTimeouts=function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},r,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})};var r={bootstrap:{millis:4e3,dieOnTimeout:!1},mount:{millis:3e3,dieOnTimeout:!1},unmount:{millis:3e3,dieOnTimeout:!1},unload:{millis:3e3,dieOnTimeout:!1}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getProps=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){i(e,t,n[t])}))}return e}({},e.customProps,{name:e.name,mountParcel:r.mountParcel.bind(e),singleSpa:o});return e.unmountThisParcel&&(t.unmountSelf=e.unmountThisParcel),t};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(n(9)),r=n(15);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.reroute=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(f)return new Promise((function(e,t){m.push({resolve:e,reject:t,eventArguments:n})}));f=!0;var o=!0;return(0,i.isStarted)()?Promise.resolve().then((function(){var e;n&&n[0]&&(e={detail:n[0]}),window.dispatchEvent(new r.default("single-spa:before-routing-event",e));var i=(0,d.getAppsToUnload)().map(d.toUnloadPromise),p=(0,l.getAppsToUnmount)().map(u.toUnmountPromise).map((function(e){return e.then(d.toUnloadPromise)})).concat(i);p.length>0&&(o=!1);var f=Promise.all(p),m=(0,l.getAppsToLoad)(),v=m.map((function(e){return(0,a.toLoadPromise)(e).then(s.toBootstrapPromise).then((function(e){return f.then((function(){return(0,c.toMountPromise)(e)}))}))}));v.length>0&&(o=!1);var y=(0,l.getAppsToMount)().filter((function(e){return m.indexOf(e)<0})).map((function(e){return(0,s.toBootstrapPromise)(e).then((function(){return f})).then((function(){return(0,c.toMountPromise)(e)}))}));return y.length>0&&(o=!1),f.catch((function(e){throw g(),e})).then((function(){return g(),Promise.all(v.concat(y)).catch((function(e){throw t.forEach((function(t){return t.reject(e)})),e})).then((function(){return h(!1)}))}))})):Promise.resolve().then((function(){var e=(0,l.getAppsToLoad)().map(a.toLoadPromise);return e.length>0&&(o=!1),Promise.all(e).then(h).catch((function(e){throw g(),e}))}));function h(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=(0,l.getMountedApps)();n&&g(),t.forEach((function(e){return e.resolve(i)}));try{var a=o?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new r.default(a)),window.dispatchEvent(new r.default("single-spa:routing-event"))}catch(e){setTimeout((function(){throw e}))}if(f=!1,m.length>0){var s=m;m=[],e(s)}return i}function g(){t.forEach((function(e){(0,p.callCapturedEventListeners)(e.eventArguments)})),(0,p.callCapturedEventListeners)(n)}};var o,r=(o=n(8))&&o.__esModule?o:{default:o},i=n(17),a=n(19),s=n(14),c=n(13),u=n(7),l=n(12),p=(n(0),n(6)),d=n(10),f=!1,m=[]},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.navigateToUrl=s,t.callCapturedEventListeners=function(e){var t=this;if(e){var n=e[0].type;a.indexOf(n)>=0&&i[n].forEach((function(n){n.apply(t,e)}))}},t.routingEventsListeningTo=void 0;var o=n(5),r=n(4),i={hashchange:[],popstate:[]},a=["hashchange","popstate"];function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)t=e;else if(this&&this.href)t=this.href;else{if(!(e&&e.currentTarget&&e.currentTarget.href&&e.preventDefault))throw new Error("singleSpaNavigate must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag");t=e.currentTarget.href,e.preventDefault()}var o=f(window.location.href),r=f(t);if(0===t.indexOf("#"))window.location.hash="#"+r.anchor;else if(o.host!==r.host&&r.host){if(n.isTestingEnv)return{wouldHaveReloadedThePage:!0};window.location.href=t}else!function(e,t){return t===e||t==="/"+e}(r.path,o.path)?window.history.pushState(null,null,t):window.location.hash="#"+r.anchor}function c(){(0,o.reroute)([],arguments)}t.routingEventsListeningTo=a,window.addEventListener("hashchange",c),window.addEventListener("popstate",c);var u=window.addEventListener,l=window.removeEventListener;window.addEventListener=function(e,t){if(!("function"==typeof t&&a.indexOf(e)>=0)||(0,r.find)(i[e],(function(e){return e===t})))return u.apply(this,arguments);i[e].push(t)},window.removeEventListener=function(e,t){if(!("function"==typeof t&&a.indexOf(e)>=0))return l.apply(this,arguments);i[e]=i[e].filter((function(e){return e!==t}))};var p=window.history.pushState;window.history.pushState=function(e){var t=p.apply(this,arguments);return(0,o.reroute)(),t};var d=window.history.replaceState;function f(e){for(var t={strictMode:!0,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser.strict.exec(e),o={},r=14;r--;)o[t.key[r]]=n[r]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,(function(e,n,r){n&&(o[t.q.name][n]=r)})),o}window.history.replaceState=function(){var e=d.apply(this,arguments);return(0,o.reroute)(),e},window.singleSpaNavigate=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toUnmountPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Promise.resolve().then((function(){if(e.status!==o.MOUNTED)return e;e.status=o.UNMOUNTING;var n=Object.keys(e.parcels).map((function(t){return e.parcels[t].unmountThisParcel()}));return Promise.all(n).then(s,(function(n){return s().then((function(){var i=new Error(n.message);if(t){var a=(0,r.transformErr)(i,e);throw e.status=o.SKIP_BECAUSE_BROKEN,a}(0,r.handleAppError)(i,e),e.status=o.SKIP_BECAUSE_BROKEN}))})).then((function(){return e}));function s(){return(0,i.reasonableTime)(e.unmount((0,a.getProps)(e)),"Unmounting application ".concat(e.name,"'"),e.timeouts.unmount).then((function(){e.status=o.NOT_MOUNTED})).catch((function(n){if(t){var i=(0,r.transformErr)(n,e);throw e.status=o.SKIP_BECAUSE_BROKEN,i}(0,r.handleAppError)(n,e),e.status=o.SKIP_BECAUSE_BROKEN}))}}))};var o=n(0),r=n(1),i=n(2),a=n(3)},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,n(20))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"start",{enumerable:!0,get:function(){return o.start}}),Object.defineProperty(t,"ensureJQuerySupport",{enumerable:!0,get:function(){return r.ensureJQuerySupport}}),Object.defineProperty(t,"setBootstrapMaxTime",{enumerable:!0,get:function(){return i.setBootstrapMaxTime}}),Object.defineProperty(t,"setMountMaxTime",{enumerable:!0,get:function(){return i.setMountMaxTime}}),Object.defineProperty(t,"setUnmountMaxTime",{enumerable:!0,get:function(){return i.setUnmountMaxTime}}),Object.defineProperty(t,"setUnloadMaxTime",{enumerable:!0,get:function(){return i.setUnloadMaxTime}}),Object.defineProperty(t,"registerApplication",{enumerable:!0,get:function(){return a.registerApplication}}),Object.defineProperty(t,"getMountedApps",{enumerable:!0,get:function(){return a.getMountedApps}}),Object.defineProperty(t,"getAppStatus",{enumerable:!0,get:function(){return a.getAppStatus}}),Object.defineProperty(t,"unloadApplication",{enumerable:!0,get:function(){return a.unloadApplication}}),Object.defineProperty(t,"checkActivityFunctions",{enumerable:!0,get:function(){return a.checkActivityFunctions}}),Object.defineProperty(t,"getAppNames",{enumerable:!0,get:function(){return a.getAppNames}}),Object.defineProperty(t,"declareChildApplication",{enumerable:!0,get:function(){return a.declareChildApplication}}),Object.defineProperty(t,"unloadChildApplication",{enumerable:!0,get:function(){return a.unloadChildApplication}}),Object.defineProperty(t,"navigateToUrl",{enumerable:!0,get:function(){return s.navigateToUrl}}),Object.defineProperty(t,"triggerAppChange",{enumerable:!0,get:function(){return c.reroute}}),Object.defineProperty(t,"addErrorHandler",{enumerable:!0,get:function(){return u.addErrorHandler}}),Object.defineProperty(t,"removeErrorHandler",{enumerable:!0,get:function(){return u.removeErrorHandler}}),Object.defineProperty(t,"mountRootParcel",{enumerable:!0,get:function(){return l.mountRootParcel}}),Object.defineProperty(t,"NOT_LOADED",{enumerable:!0,get:function(){return p.NOT_LOADED}}),Object.defineProperty(t,"LOADING_SOURCE_CODE",{enumerable:!0,get:function(){return p.LOADING_SOURCE_CODE}}),Object.defineProperty(t,"NOT_BOOTSTRAPPED",{enumerable:!0,get:function(){return p.NOT_BOOTSTRAPPED}}),Object.defineProperty(t,"BOOTSTRAPPING",{enumerable:!0,get:function(){return p.BOOTSTRAPPING}}),Object.defineProperty(t,"NOT_MOUNTED",{enumerable:!0,get:function(){return p.NOT_MOUNTED}}),Object.defineProperty(t,"MOUNTING",{enumerable:!0,get:function(){return p.MOUNTING}}),Object.defineProperty(t,"UPDATING",{enumerable:!0,get:function(){return p.UPDATING}}),Object.defineProperty(t,"MOUNTED",{enumerable:!0,get:function(){return p.MOUNTED}}),Object.defineProperty(t,"UNMOUNTING",{enumerable:!0,get:function(){return p.UNMOUNTING}}),Object.defineProperty(t,"SKIP_BECAUSE_BROKEN",{enumerable:!0,get:function(){return p.SKIP_BECAUSE_BROKEN}});var o=n(17),r=n(11),i=n(2),a=n(12),s=n(6),c=n(5),u=n(1),l=n(15),p=n(0)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toUnloadPromise=function(e){return Promise.resolve().then((function(){var t=s[e.name];return t?e.status===o.NOT_LOADED?(c(e,t),e):e.status===o.UNLOADING?t.promise.then((function(){return e})):e.status!==o.NOT_MOUNTED?e:(e.status=o.UNLOADING,(0,i.reasonableTime)(e.unload((0,a.getProps)(e)),"Unloading application '".concat(e.name,"'"),e.timeouts.unload).then((function(){return c(e,t),e})).catch((function(n){return function(e,t,n){delete s[e.name],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,(0,r.handleAppError)(n,e),e.status=o.SKIP_BECAUSE_BROKEN,t.reject(n)}(e,t,n),e}))):e}))},t.addAppToUnload=function(e,t,n,o){s[e.name]={app:e,resolve:n,reject:o},Object.defineProperty(s[e.name],"promise",{get:t})},t.getAppUnloadInfo=function(e){return s[e]},t.getAppsToUnload=function(){return Object.keys(s).map((function(e){return s[e].app})).filter(o.isntActive)};var o=n(0),r=n(1),i=n(2),a=n(3),s={};function c(e,t){delete s[e.name],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,e.status=o.NOT_LOADED,t.resolve()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureJQuerySupport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!r){var t=e.fn.on,n=e.fn.off;e.fn.on=function(e,n){return i.call(this,t,window.addEventListener,e,n,arguments)},e.fn.off=function(e,t){return i.call(this,n,window.removeEventListener,e,t,arguments)},r=!0}};var o=n(6),r=!1;function i(e,t,n,r,i){return"string"!=typeof n?e.apply(this,i):(n.split(/\s+/).forEach((function(e){o.routingEventsListeningTo.indexOf(e)>=0&&(t(e,r),n=n.replace(e,""))})),""===n.trim()?this:e.apply(this,i))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getMountedApps=function(){return l.filter(r.isActive).map(r.toName)},t.getAppNames=p,t.getAppStatus=function(e){var t=(0,a.find)(l,(function(t){return t.name===e}));return t?t.status:null},t.declareChildApplication=function(e,t,n){return console.warn('declareChildApplication is deprecated and will be removed in the next major version, use "registerApplication" instead'),d(e,t,n)},t.registerApplication=d,t.checkActivityFunctions=function(e){for(var t=[],n=0;n<l.length;n++)l[n].activeWhen(e)&&t.push(l[n].name);return t},t.getAppsToLoad=function(){return l.filter(r.notSkipped).filter(r.isntLoaded).filter(r.shouldBeActive)},t.getAppsToUnmount=function(){return l.filter(r.notSkipped).filter(r.isActive).filter(r.shouldntBeActive)},t.getAppsToMount=function(){return l.filter(r.notSkipped).filter(r.isntActive).filter(r.isLoaded).filter(r.shouldBeActive)},t.unloadChildApplication=function(e,t){return console.warn('unloadChildApplication is deprecated and will be removed in the next major version, use "unloadApplication" instead'),f(e,t)},t.unloadApplication=f;var o=n(11),r=n(0),i=n(5),a=n(4),s=n(7),c=n(10);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=[];function p(){return l.map(r.toName)}function d(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof e||0===e.length)throw new Error("The first argument must be a non-empty string 'appName'");if(-1!==p().indexOf(e))throw new Error("There is already an app declared with name ".concat(e));if("object"!==u(s)||Array.isArray(s))throw new Error("customProps must be an object");if(!t)throw new Error("The application or loading function is required");if(a="function"!=typeof t?function(){return Promise.resolve(t)}:t,"function"!=typeof n)throw new Error("The activeWhen argument must be a function");l.push({name:e,loadImpl:a,activeWhen:n,status:r.NOT_LOADED,parcels:{},customProps:s}),(0,o.ensureJQuerySupport)(),(0,i.reroute)()}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof e)throw new Error("unloadApplication requires a string 'appName'");var n=(0,a.find)(l,(function(t){return t.name===e}));if(!n)throw new Error("Could not unload application '".concat(e,"' because no such application has been declared"));var o,r=(0,c.getAppUnloadInfo)(n.name);if(t&&t.waitForUnmount){if(r)return r.promise;var i=new Promise((function(e,t){(0,c.addAppToUnload)(n,(function(){return i}),e,t)}));return i}return r?(o=r.promise,m(n,r.resolve,r.reject)):o=new Promise((function(e,t){(0,c.addAppToUnload)(n,(function(){return o}),e,t),m(n,e,t)})),o}function m(e,t,n){(0,s.toUnmountPromise)(e).then(c.toUnloadPromise).then((function(){t(),setTimeout((function(){(0,i.reroute)()}))})).catch(n)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toMountPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Promise.resolve().then((function(){return e.status!==r.NOT_MOUNTED?e:(u||(window.dispatchEvent(new s.default("single-spa:before-first-mount")),u=!0),(0,a.reasonableTime)(e.mount((0,c.getProps)(e)),"Mounting application '".concat(e.name,"'"),e.timeouts.mount).then((function(){return e.status=r.MOUNTED,l||(window.dispatchEvent(new s.default("single-spa:first-mount")),l=!0),e})).catch((function(n){if(t){var o=(0,i.transformErr)(n,e);throw e.status=r.SKIP_BECAUSE_BROKEN,o}return(0,i.handleAppError)(n,e),e.status=r.SKIP_BECAUSE_BROKEN,e})))}))};var o,r=n(0),i=n(1),a=n(2),s=(o=n(8))&&o.__esModule?o:{default:o},c=n(3),u=!1,l=!1},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toBootstrapPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Promise.resolve().then((function(){return e.status!==o.NOT_BOOTSTRAPPED?e:(e.status=o.BOOTSTRAPPING,(0,r.reasonableTime)(e.bootstrap((0,a.getProps)(e)),"Bootstrapping appOrParcel '".concat(e.name,"'"),e.timeouts.bootstrap).then((function(){return e.status=o.NOT_MOUNTED,e})).catch((function(n){if(e.status=o.SKIP_BECAUSE_BROKEN,t)throw(0,i.transformErr)(n,e);return(0,i.handleAppError)(n,e),e})))}))};var o=n(0),r=n(2),i=n(1),a=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mountRootParcel=function(){return f.apply(d,arguments)},t.mountParcel=f;var o=n(16),r=n(0),i=n(14),a=n(13),s=n(18),c=n(7),u=n(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(1);var p=0,d={parcels:{}};function f(e,t){var n=this;if(!e||"object"!==l(e)&&"function"!=typeof e)throw new Error("Cannot mount parcel without a config object or config loading function");if(e.name&&"string"!=typeof e.name)throw new Error("Parcel name must be a string, if provided");if("object"!==l(t))throw new Error("Parcel ".concat(name," has invalid customProps -- must be an object"));if(!t.domElement)throw new Error("Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"));var d,f=p++,h="function"==typeof e,g=h?e:function(){return Promise.resolve(e)},v={id:f,parcels:{},status:h?r.LOADING_SOURCE_CODE:r.NOT_BOOTSTRAPPED,customProps:t,owningAppOrParcel:n,unmountThisParcel:function(){if(v.status!==r.MOUNTED)throw new Error("Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(v.status," status"));return(0,c.toUnmountPromise)(v,!0).then((function(e){return v.owningAppOrParcel&&delete v.owningAppOrParcel.parcels[v.id],e})).then((function(e){return b(e),e})).catch((function(e){throw v.status=r.SKIP_BECAUSE_BROKEN,w(e),e}))}};n.parcels[f]=v;var y=g();if(!y||"function"!=typeof y.then)throw new Error("When mounting a parcel, the config loading function must return a promise that resolves with the parcel config");var b,w,_=(y=y.then((function(e){if(!e)throw new Error("When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config");var t=e.name||"parcel-".concat(f);if(!(0,o.validLifecycleFn)(e.bootstrap))throw new Error("Parcel ".concat(t," must have a valid bootstrap function"));if(!(0,o.validLifecycleFn)(e.mount))throw new Error("Parcel ".concat(t," must have a valid mount function"));if(!(0,o.validLifecycleFn)(e.unmount))throw new Error("Parcel ".concat(t," must have a valid unmount function"));if(e.update&&!(0,o.validLifecycleFn)(e.update))throw new Error("Parcel ".concat(t," provided an invalid update function"));var n=(0,o.flattenFnArray)(e.bootstrap),i=(0,o.flattenFnArray)(e.mount),a=(0,o.flattenFnArray)(e.unmount);v.status=r.NOT_BOOTSTRAPPED,v.name=t,v.bootstrap=n,v.mount=i,v.unmount=a,v.timeouts=(0,u.ensureValidAppTimeouts)(v),e.update&&(v.update=(0,o.flattenFnArray)(e.update),d.update=function(e){return v.customProps=e,m((0,s.toUpdatePromise)(v))})}))).then((function(){return(0,i.toBootstrapPromise)(v,!0)})),O=_.then((function(){return(0,a.toMountPromise)(v,!0)})),E=new Promise((function(e,t){b=e,w=t}));return d={mount:function(){return m(Promise.resolve().then((function(){if(v.status!==r.NOT_MOUNTED)throw new Error("Cannot mount parcel '".concat(name,"' -- it is in a ").concat(v.status," status"));return n.parcels[f]=v,(0,a.toMountPromise)(v)})))},unmount:function(){return m(v.unmountThisParcel())},getStatus:function(){return v.status},loadPromise:m(y),bootstrapPromise:m(_),mountPromise:m(O),unmountPromise:m(E)}}function m(e){return e.then((function(){return null}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.validLifecycleFn=function(e){return e&&("function"==typeof e||(t=e,Array.isArray(t)&&!(0,o.find)(t,(function(e){return"function"!=typeof e}))));var t},t.flattenFnArray=function(e,t){return 0===(e=Array.isArray(e)?e:[e]).length&&(e=[function(){return Promise.resolve()}]),function(n){return new Promise((function(o,i){!function a(s){var c=e[s](n);r(c)?c.then((function(){s===e.length-1?o():a(s+1)})).catch(i):i("".concat(t," at index ").concat(s," did not return a promise"))}(0)}))}},t.smellsLikeAPromise=r;var o=n(4);function r(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(){t.started=r=!0,(0,o.reroute)()},t.isStarted=function(){return r},t.started=void 0;var o=n(5),r=!1;t.started=r,setTimeout((function(){r||console.warn("singleSpa.start() has not been called, ".concat(5e3,"ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted. See https://github.com/CanopyTax/single-spa/blob/master/docs/single-spa-api.md#start"))}),5e3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toUpdatePromise=function(e){return Promise.resolve().then((function(){if(e.status!==o.MOUNTED)throw new Error("Cannot update parcel '".concat(e.name,"' because it is not mounted"));return e.status=o.UPDATING,(0,i.reasonableTime)(e.update((0,a.getProps)(e)),"Updating parcel '".concat(e.name,"'"),e.timeouts.mount).then((function(){return e.status=o.MOUNTED,e})).catch((function(t){var n=(0,r.transformErr)(t,e);throw e.status=o.SKIP_BECAUSE_BROKEN,n}))}))};var o=n(0),r=n(1),i=n(2),a=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toLoadPromise=function(e){return Promise.resolve().then((function(){return e.status!==o.NOT_LOADED?e:(e.status=o.LOADING_SOURCE_CODE,Promise.resolve().then((function(){var n=e.loadImpl((0,s.getProps)(e));if(!(0,a.smellsLikeAPromise)(n))throw new Error("single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(e.name,"', loadingFunction, activityFunction)"));return n.then((function(n){var s;return"object"!==c(t=n)&&(s="does not export anything"),(0,a.validLifecycleFn)(t.bootstrap)||(s="does not export a bootstrap function or array of functions"),(0,a.validLifecycleFn)(t.mount)||(s="does not export a mount function or array of functions"),(0,a.validLifecycleFn)(t.unmount)||(s="does not export an unmount function or array of functions"),s?((0,i.handleAppError)(s,e),e.status=o.SKIP_BECAUSE_BROKEN,e):(e.status=o.NOT_BOOTSTRAPPED,e.bootstrap=(0,a.flattenFnArray)(t.bootstrap,"App '".concat(e.name,"' bootstrap function")),e.mount=(0,a.flattenFnArray)(t.mount,"App '".concat(e.name,"' mount function")),e.unmount=(0,a.flattenFnArray)(t.unmount,"App '".concat(e.name,"' unmount function")),e.unload=(0,a.flattenFnArray)(t.unload||[],"App '".concat(e.name,"' unload function")),e.timeouts=(0,r.ensureValidAppTimeouts)(t.timeouts),e)}))})).catch((function(t){return(0,i.handleAppError)(t,e),e.status=o.SKIP_BECAUSE_BROKEN,e})));var t}))};var o=n(0),r=n(2),i=n(1),a=(n(4),n(16)),s=n(3);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(9)}])})),R=(S=T)&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S;T.singleSpa;function N(e){var t="/sc.ma.log";switch(window.host){case"msite":t="/sc.ma.msite";break;case"weblite":t="/sc.ma.weblite";break;case"messenger":t="/sc.ma.messenger"}var n="ext="+encodeURIComponent(e);window.goldlog&&window.goldlog.record?window.goldlog.record(t,"CLK",n,"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[t,"CLK",n,"GET"]})}var I,x=["mountParcel","name","singleSpa"];function C(e,t,n){var o=Error("==== SPA "+e+" ==== "+t);throw N("SPA_HELPER_error&appName="+(n||"noApp")+"&errorType="+e+"&errorMsg="+t),o}function j(e,t){for(var n in t)t.hasOwnProperty(n)&&-1!==x.indexOf(n)&&C(I.PARAMS_ERROR,"Reserved key found in params of "+e+"! '"+n+"' is a reserved key, do not use it!",e)}!function(e){e.LORD_ERROR="LORD_ERROR",e.BOOTSTRAP_ERROR="BOOTSTRAP_ERROR",e.MOUNT_ERROR="MOUNT_ERROR",e.UNMOUNT_ERROR="UNMOUNT_ERROR",e.PARAMS_ERROR="PARAMS_ERROR",e.CONFIG_ERROR="CONFIG_ERROR",e.REDIRECT_ERROR="REDIRECT_ERROR"}(I||(I={}));var M=/^(((ht|f)tps?):)?\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/,k=function(e){return M.test(e)};function D(e){return new Promise((function(t,n){k(e)||n(C(I.LORD_ERROR,e+" is not a correct url. "));var o=document.createElement("script");o.charset="utf-8",o.async=!0,o.addEventListener("error",(function(){n(C(I.LORD_ERROR,"Fail to load js file: "+e))})),o.addEventListener("load",(function(){var e=window.__spaApplication__;delete window.__spaApplication__,t(e),document.head.removeChild(o)})),o.src=e,document.head.appendChild(o)}))}function L(e){return e.replace(/(dev\.)?g\.alicdn\.com/g,"s.alicdn.com/@g")}var U={},q={},B={};function J(e,t){var n=e.bootstrap,o=e.mount,r=e.unmount;return{bootstrap:function(e){return A(this,void 0,void 0,(function(){return P(this,(function(o){if("function"===typeof n)try{n(e)}catch(e){C(I.BOOTSTRAP_ERROR,"An error happened when execute "+t+"'s 'bootstrap': "+e,t)}return[2]}))}))},mount:function(e){return A(this,void 0,void 0,(function(){return P(this,(function(n){if("function"===typeof o)try{o(e),N("SPA_HELPER_microAppLoadSuccess&appName="+t)}catch(e){C(I.MOUNT_ERROR,"An error happened when execute "+t+"'s 'mount': "+e,t)}else C(I.MOUNT_ERROR,"The "+t+"'s 'mount' needs to be a function, but get "+typeof o,t);return[2]}))}))},unmount:function(e){return A(this,void 0,void 0,(function(){return P(this,(function(n){if("function"===typeof r)try{r(e),N("SPA_HELPER_microAppUnloadSuccess&appName="+t)}catch(e){C(I.UNMOUNT_ERROR,"An error happened when execute "+t+"'s 'unmount': "+e,t)}else C(I.UNMOUNT_ERROR,"The "+t+"'s 'unmount' needs to be a function, but get "+typeof r,t);return[2]}))}))}}}function F(){for(var e in B)B[e].activable=!0}function W(e){"object"===typeof e&&null!==e||C(I.CONFIG_ERROR,"An app config needs to be an object, but get "+(null===e?"null":typeof e));var t=e.appName,n=e.resources,o=e.customProps;o&&j(t,o),"string"!==typeof t&&C(I.CONFIG_ERROR,"The 'appName' of an app needs to be an object, but get "+typeof t,t),Array.isArray(n)||C(I.CONFIG_ERROR,"The 'resources' of "+t+" needs to be an Array, but get "+typeof n,t),U[t]=E({},o||{}),q[t]=o||{},R.registerApplication(t,(function(){var e=Promise.resolve(J({bootstrap:function(){return""},mount:function(){return""},unmount:function(){return""}},t));return n.forEach((function(n){var o=n.type,r=n.url;switch("string"!==typeof o&&C(I.CONFIG_ERROR,"The type of resource needs to be a string, but get "+typeof o+" in "+t,t),"string"!==typeof r&&C(I.CONFIG_ERROR,"The url of resource needs to be a string, but get "+typeof r+" in "+t,t),o){case"appURL":case"js":"appURL"===o?e=D(r).then((function(e){return J(e,t)})):D(r);break;case"css":!function(e){new Promise((function(t,n){k(e)||n(C(I.LORD_ERROR,e+" is not a correct url. "));var o=document.createElement("link");o.rel="stylesheet",o.addEventListener("error",(function(){n(C(I.LORD_ERROR,"Fail to load css file: "+e+". "))})),o.href=e,document.head.appendChild(o)}))}(r);break;default:C(I.CONFIG_ERROR,"The type of resource needs to be one of 'appURL', 'js' and 'css, but get '"+o+"' in "+t,t)}})),e}),function(e){return function(t){var n=window.location.__invisibleHash__,o=Array.isArray(n)?n:[n],r=B[e];if(!r.activable)return r.active;for(var i=0;i<o.length;i++)if(o[i]){var a=B[o[i]];if(e===o[i]){r.active=!r.active;break}if(r.group===a.group){r.active=!1;break}}return r.activable=!1,r.active}}(t),U[t])}function G(e){"object"===typeof e&&null!==e||C(I.REDIRECT_ERROR,"A redirect option needs to be an object, but get "+(null===e?"null":typeof e));var t=e.appName,n=e.params,o=e.blank;n&&j(t,n);var r=typeof n;"object"!==r&&"undefined"!==r&&C(I.CONFIG_ERROR,"The 'params' of redirect option needs to be a object, but get "+r,t);var i=typeof o;"boolean"!==i&&"undefined"!==i&&C(I.CONFIG_ERROR,"The 'blankType' of redirect option needs to be a boolean, but get "+i,t),(Array.isArray(t)?t:[t]).forEach((function(e){if("string"!==typeof e&&C(I.REDIRECT_ERROR,"The 'appName' of redirect option needs to be a string, but get "+typeof e,e),e){var t=E({},q[e],n||{});for(var o in U[e])o in t||delete U[e][o];U[e]&&Object.assign(U[e],t)}})),(window.location.__invisibleHash__===t||B[t].active)&&(B[t].active&&(window.location.__invisibleHash__=t),F(),history.replaceState({},"",window.location.href)),setTimeout((function(){window.location.__invisibleHash__=t,F(),history[o?"pushState":"replaceState"]({},"",window.location.href)}),0)}function H(){return window.location.__invisibleHash__}function K(){var e=[];for(var t in B)B[t].active&&e.push(t);return e}window.location.__invisibleHash__="";var V=[].slice;function z(){if(!(this instanceof z))return new z;this.nextSubscriptionIndex=0,this.callbacks={}}z.prototype.unregisterAllCallbacks=function(){this.callbacks={}},z.prototype.on=function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push({subscription:t,index:this.nextSubscriptionIndex});var n=this.nextSubscriptionIndex,o=this;return this.nextSubscriptionIndex+=1,function(){o.callbacks[e]=o.callbacks[e].filter((function(e){return e.index!==n}))}},z.prototype.publish=function(){var e=arguments[0],t=arguments.length>=2?V.call(arguments,1):[];this.callbacks&&this.callbacks[e]&&this.callbacks[e].forEach((function(e){e.subscription.apply(null,t)}))};var X=new z,$=n(13),Q=n.n($),Y=n(14),Z=n.n(Y),ee=n(15),te=n.n(ee),ne=n(3),oe=n.n(ne),re=n(16);n(26);function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g()(this,n)}}var ae=(0,window.IcbuIM.lib.I18N.createI18N)({namespace:"messenger"}),se=function(e){m()(n,e);var t=ie(n);function n(){return c()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return O.a.createElement("div",{className:"landing-page-wrapper"},O.a.createElement("div",{className:"landing-img"},O.a.createElement("img",{src:"https://img.alicdn.com/tfs/TB1E84Hwj7nBKNjSZLeXXbxCFXa-320-160.png"}),this.props.updateChrome&&O.a.createElement("p",{className:"tip"},O.a.createElement("a",{href:"https://www.google.com/chrome/",target:"_blank"},ae.get("pwa.chrometip")))))}}]),n}(O.a.Component),ce=n(10),ue=n.n(ce),le=n(9),pe=n.n(le);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=window.IcbuIM.CommonUtil.json2Querystring,he=window.IcbuIM.lib.log;function ge(e){var t=window.chat_entry_scene||{};"string"===typeof e?me(t)&&(e+="&".concat(me(t))):"object"===pe()(e)&&(e.bizData=fe(fe({},e.bizData||{}),t)),he(e)}var ve=n(17),ye=n.n(ve);n(31);function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g()(this,n)}}var we=(0,window.IcbuIM.lib.I18N.createI18N)({namespace:"onepage.ma.pwa"}),_e=function(e){m()(n,e);var t=be(n);function n(e){var o;return c()(this,n),(o=t.call(this,e)).addToHome=o.addToHome.bind(d()(o)),o.shouldShowAddButton=o.shouldShowAddButton.bind(d()(o)),o.state={successfullyInstalled:!1,readyToAdd:!1,acceptedInstall:!1,declinedInstall:!1,close:!1},o}return l()(n,[{key:"componentDidMount",value:function(){var e=this;window.matchMedia("(display-mode: standalone)").matches?(ge("usePWA"),this.setState({successfullyInstalled:!0})):(window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),window.deferredPrompt=t,e.setState({readyToAdd:!0})})),window.addEventListener("appinstalled",(function(t){ge("installPWASuc"),e.setState({successfullyInstalled:!0})})))}},{key:"addToHome",value:function(){var e=this,t=window.deferredPrompt;t&&(t.prompt(),t.userChoice.then((function(n){"accepted"===n.outcome?(ge("installPWA"),e.setState({acceptedInstall:!0})):(ge("declinePWA"),e.setState({declinedInstall:!0})),t=null})))}},{key:"shouldShowAddButton",value:function(){return this.state.readyToAdd&&!this.state.successfullyInstalled&&!this.state.acceptedInstall&&!this.state.declinedInstall&&!this.state.close}},{key:"render",value:function(){var e=this,t="buyer"===this.props.version?"https://img.alicdn.com/tfs/TB1uArtRSrqK1RjSZK9XXXyypXa-128-128.png":"https://img.alicdn.com/tfs/TB1tSLzb1T2gK0jSZFvXXXnFXXa-128-128.png";return O.a.createElement("div",{className:"pwa-addHome"},this.shouldShowAddButton()?O.a.createElement("div",{className:"content"},O.a.createElement("img",{src:t,className:"icon"}),O.a.createElement("div",{className:"tip"},O.a.createElement("div",{dangerouslySetInnerHTML:{__html:we.get("title")}}),O.a.createElement("div",{className:"sub-tip"},we.get("subtitle"))),O.a.createElement("button",{className:"add-action",onClick:this.addToHome},we.get("add")),O.a.createElement("span",{className:"close",onClick:function(){e.setState({close:!0})}},O.a.createElement(ye.a,{type:"close",size:"small"}))):null)}}]),n}(O.a.Component),Oe=function(e){var t=[],n=/\[\]$/,o=function(e,n){n="function"===typeof n?n():null===n||void 0===n?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)};return function e(r,i){var a,s,c;if(r)if(Array.isArray(i))for(a=0,s=i.length;a<s;a++)n.test(r)?o(r,i[a]):e(r+"["+("object"===pe()(i[a])?a:"")+"]",i[a]);else if(i&&"[object Object]"===String(i))for(c in i)e(r+"["+c+"]",i[c]);else o(r,i);else if(i&&"object"===pe()(i))for(c in i)e(c,i[c]);return t}("",e).join("&")};var Ee=(e={})=>{(({productId:e,pageLanguage:t,pageType:n,siteName:o,categoryId:r})=>{var i=function(e){return window.location.protocol+e},a=window.location.protocol+"//s.alicdn.com",s=i("./proxy.html?iframe_delete=true"),c=window.SEMR={_postData:{},_bindEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},_initIframeProxy:function(){var e=document,t=e.body||e.documentElement,n="sem-remarketing",o=e.getElementById(n);o&&o.nodeType||((o=e.createElement("iframe")).id=n,o.name="sem-remarketing",o.style.display="none",o.style.visibility="hidden",o.src=s,t.appendChild(o))},_isEmptyObject:function(e){for(var t in e)return!1;return!0},_isP4P:function(){return/s=p/.test(location.href)},_isWap:function(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)},_log:function(e){window.console&&window.console.log&&window.console.log(e),c._sendDomdot("26131","error="+e)},_send:function(){var t=window.SEM_REMARKETING_CONFIG||{},n=window.SEM_REMARKETING_DATA||{};if(c._isEmptyObject(n))return!1;window.SEM_REMARKETING_CONFIG=t,n.isP4P=c._isP4P(),n.pageDevice=c._isWap()?"Mobile":"PC",n.categoryId=r,n.productId=e,n.pageCate&&(n.pageCate=n.pageCate.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'")),n.pageName&&(n.pageName=n.pageName.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'"));var o={timeout:2e4,url:"//offer.alibaba.com/product/fetchSiteTag.jsonp",callback:"callback",data:{siteName:n.siteName||"",pageFrom:n.pageType||"",pageInfo:JSON.stringify(n),language:n.pageLanguage||""},success:function(e){if(!e||!e.success||!e.result)return!1;var t=[].concat(e.result);t.length>0&&(c._postData=t,c._initIframeProxy(),c._sendDomdot("26131","success"))},fail:function(e){c._log("SEMRSE-01-02")}};c._sendJsonp(o),c._sendDomdot("26131","initialization")},_sendByIframeProxy:function(e){if(e.origin!=a)return!1;var t,n,o=e.data;if("string"!==typeof o)return!1;var r=[];try{"function"===typeof o.split?r=o.split(":"):"function"===typeof String.prototype.split&&(r=String.prototype.split.call(o,":")),"[object Array]"===Object.prototype.toString.call(r)&&(t=r[0],n=r[1]||"")}catch(e){console.error("sem-remarketing _sendByIframeProxy error:",e),window._WPO&&window._WPO.error("sem-remarketing _sendByIframeProxy error",o)}if("ready"==t){var i=JSON.stringify(c._postData);e.source&&e.source.postMessage&&e.source.postMessage(i,a)}else"error"==t?c._log(n):"complete"==t&&c._sendDomdot("26254",n)},_sendDomdot:function(e,t){var n={ext:"event="+(window.SEM_REMARKETING_DATA&&window.SEM_REMARKETING_DATA.pageType)+"|"+t,mn:"sem"};window.dmtrack&&window.dmtrack.dotstat&&window.dmtrack_pageid&&e&&window.dmtrack.dotstat(e,n)},_sendJsonp:function(e){if(!(e=e||{}).url||!e.callback)throw new Error("params error!");var t=e.data[e.callback]="jsonp_"+1*new Date+Math.ceil(1e5*Math.random()),n=c._toQueryString(e.data,"&"),o=document.createElement("script"),r=document.getElementsByTagName("head")[0];r.appendChild(o),window[t]=function(n){r.removeChild(o),clearTimeout(o.timer),window[t]=function(){},e.success&&e.success(n)},o.src=e.url+"?"+n,e.timeout&&(o.timer=setTimeout((function(){window[t]=function(){},r.removeChild(o),e.fail&&e.fail({message:"overtime"})}),e.timeout))},_toQueryString:function(e,t){var n,o,r=[];if(!e)return"";for(n in e)o=e[n]||"",r.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return r.join(t||"&")}},u=window.SEM_REMARKETING_CONFIG||{};u.runtime="async",window.SEM_REMARKETING_CONFIG=u;var l=window.SEM_REMARKETING_DATA||{};l.productId=e,l.pageLanguage=t,l.pageType=n,l.siteName=o,l.categoryId=r,window.SEM_REMARKETING_DATA=l;try{window.postMessage?(c._bindEvent(window,"message",c._sendByIframeProxy),"async"==(window.SEM_REMARKETING_CONFIG||{}).runtime?c._send():function(e,t){var n=!1,o=!0,r=e.document,i=r.documentElement,a=r.addEventListener,s=a?"addEventListener":"attachEvent",c=a?"removeEventListener":"detachEvent",u=a?"":"on",l=function(o){"readystatechange"==o.type&&"complete"!=r.readyState||(("load"==o.type?e:r)[c](u+o.type,l,!1),!n&&(n=!0)&&t.call(e,o.type||o))},p=function(){try{i.doScroll("left")}catch(e){return void setTimeout(p,50)}l("poll")};if("complete"==r.readyState)t.call(e,"lazy");else{if(!a&&i.doScroll){try{o=!e.frameElement}catch(e){}o&&p()}r[s](u+"DOMContentLoaded",l,!1),r[s](u+"readystatechange",l,!1),e[s](u+"load",l,!1)}}(window,c._send.bind(c))):c._log("SEMRSE-01-01")}catch(e){c._log("SEMRSE-01-00")}})(e)},Ae=(n(33),["sceneData","action","source","bizId"]);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g()(this,n)}}var Re=(0,window.IcbuIM.lib.I18N.createI18N)({namespace:"messenger.pwa"}),Ne=(window.IcbuIM.IMBaaSSDK.default,window.IcbuIM.UserUtil.getLoginId,{expand:[294,578],fold:[210,44],"expand-notification":[210,154],"fold-notification":[210,44]}),Ie=function(e){m()(n,e);var t=Te(n);function n(e){var o;return c()(this,n),o=t.call(this,e),w()(d()(o),"handlePostMessage",function(){var e=a()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,e.t0=n,e.next="weblite:inquiryFormClosed"===e.t0?4:"nav2InquirySuc"===e.t0?6:"weblite:open"===e.t0?8:10;break;case 4:return o.afterInquiryClosed(),e.abrupt("break",12);case 6:return o.afterInquirySent(t),e.abrupt("break",12);case 8:return o.openWeblite(t),e.abrupt("break",12);case 10:return o.handleChatNow(t),e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w()(d()(o),"openWeblite",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data||{},n=t.aliId,o=t.aliIdEncrypt;X.publish("im-weblite-list:selectContact",{aliId:n,aliIdEncrypt:o})})),w()(d()(o),"handleChatNow",(function(e){var t=e.type;if(!/^weblite:/g.test(t))return!1;var n=e.webliteConfig,r=void 0===n?{}:n,i=e.shouldLogin,a=void 0!==i&&i;console.log("===Receive Post Message",JSON.parse(JSON.stringify(e)));var s=r.activeLoginIdEncrypt,c=r.productId,u=r.lazyInit,l=r.attrs,p=void 0===l?{}:l,d=p.uid,f=void 0===d?"":d,m=p.pid,h=void 0===m?"":m,g=p.scene,v=void 0===g?{}:g,y=p.source,b=void 0===y?"":y,w=p.disabled,_=void 0!==w&&w,O=v.pageId,E=void 0===O?"":O,A=v.refer,P=void 0===A?"":A,S=v.fromPage,T=void 0===S?"":S;p.source=b||T||"",p.sceneType=p.sceneType||p.scenetype||T||"",p.bizType=p.bizType||p.biztype||"",p.bizId=p.bizId||p.bizid||"",r.activeLoginIdEncrypt=s||f,r.productId=c||h,r.lazyInit=u||_,r.sceneType=p.sceneType,r.pageId=E,window.pageId=E,oe.a.pageId=oe.a.pageId||E,oe.a.refer=oe.a.refer||P,o.webliteConfig=r,(a||o.shouldLogin(t))&&window.location.reload(),"weblite:selectContact"===t&&(v.fromButton=v.bizType||"",v.refer=v.refer||document.referrer,window.chat_entry_scene=v||{},ge("weblite_post_message_received&type=".concat(e.type)),o.assignContact())})),w()(d()(o),"assignContact",a()(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),n={clickTimestamp:t||Date.now(),chatLoaded:!!window.__imWebliteChat__loaded__},e.prev=2,e.next=5,o.contactAutoAssign();case 5:1*(r=e.sent).code===200&&(o.assignLoginIdEncrypt=r.data.receiverLoginIdEncrypt,n.encryptId=o.assignLoginIdEncrypt,n.accountId=r.data.receiverAccountId),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:o.selectContact(n);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),w()(d()(o),"shouldLogin",(function(e){var t=!1;if("weblite:reload"===e&&(t=!0),"weblite:selectContact"===e){var n=xe();n&&n!==o.isLogin&&(o.isLogin=n,t=n)}return t})),w()(d()(o),"microAppDidMount",(function(){var e=window.SPA_MODULES,t={};window.webliteMicroConfig?(window.SPA_MODULES={list:"list",chat:"chat",conversationList:"conversationList"},e=window.SPA_MODULES,t=function(e,t){var n={};e.forEach((function(e){var t=e.basename,o=e.appResource,r=new RegExp("/\\d+.\\d+.\\d+/index.js"),i=new RegExp("/\\d+.\\d+.\\d+/index.css");n[t]={appName:t,resources:[]},(Array.isArray(o)?o.slice():o.scripts.concat(o.styles)).forEach((function(e){r.test(e)?n[t].resources.push({type:"appURL",url:L(e)}):i.test(e)&&n[t].resources.push({type:"css",url:L(e)})}))}));var o=[];if(t)t.forEach((function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t.push(n[e])})),o.push(t)}else o.push(n[e])}));else for(var r in n)n.hasOwnProperty(r)&&o.push(n[r]);return o}(window.webliteMicroConfig,[e.list,e.chat,e.conversationList])):t=window.SPA_MODULES_CONFIG,function(e){Array.isArray(e)||C(I.CONFIG_ERROR,"The configs of apps need to be an Array, but get "+typeof e);for(var t=0;t<e.length;t++){var n=e[t];if(Array.isArray(n))for(var o=0;o<n.length;o++){var r=n[o];B[r.appName]={group:t,active:!1},W(r)}else B[n.appName]={group:t,active:!1},W(n)}R.start(),R.addErrorHandler((function(e){var t=e.message.indexOf("==== SPA");e.message=e.message.slice(t),setTimeout((function(){throw e}))}))}(t.map((function(t){return t.appName===e.chat?(t.customProps={EventBus:X,redirectTo:G,getCurrentHash:H,SPA_MODULES:e,getCurrentAppNames:K,boxWidth:476,boxHeight:578,toolbar:["emotion","image","attachment"],host:"weblite",selector:"#icbu-weblite-chat"},o.props.isPWA&&(t.customProps.boxWidth="100%",t.customProps.boxHeight="100%",t.customProps.host="pwa")):t.appName!==e.list&&t.appName!==e.conversationList||(t.customProps={EventBus:X,redirectTo:G,getCurrentHash:H,getCurrentAppNames:K,host:"weblite",selector:"#icbu-weblite-list"}),t})))})),w()(d()(o),"loadInitialMicroApp",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window.SPA_MODULES,n=o.webliteConfig.params,r=void 0===n?{}:n;r.isPWA=Ce(),e.forEach((function(e){var n=t[e],o=Se(Se({},r),r.attrs);"chat"===e&&Object.assign(o,{extraInfo:{showDefaultPage:!0}}),G({appName:n,hash:n,params:o})}))})),w()(d()(o),"contactAutoAssign",(function(){var e=o.webliteConfig,t=e.attrs,n=void 0===t?{}:t,r=e.activeLoginIdEncrypt,i=void 0===r?"":r,a=n.bizType,s=n.bizId;return new Promise((function(e,t){if(ge({ext:"weblite_distributeChat",bizData:Se(Se({},n),{},{activeLoginIdEncrypt:i})}),i&&a&&s){var r={contactLoginIdEncrypt:i,bizType:a,bizId:s};fetch("https://onetalk.alibaba.com/csrf/getToken.htm",{cache:"no-cache",method:"POST",mode:"cors",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"include"}).then((function(e){return e.json()})).then((function(n){return ge({ext:"weblite_distributeChat_getToken_succeed",bizData:Se(Se({},n),r)}),o.fetchAssignedContact(r,n.token,e,t)})).catch((function(n){ge({ext:"weblite_distributeChat_getToken_failed",bizData:Se(Se({},r),{},{err:n})}),o.fetchAssignedContact(r,"",e,t)}))}else ge({ext:"weblite_distributeChat_stop",bizData:Se(Se({},n),{},{activeLoginIdEncrypt:i})}),e({})}))})),w()(d()(o),"fetchAssignedContact",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;ge({ext:"weblite_distributeChat_start",bizData:Se(Se({},e),{},{token:t})});var r="https://onetalk.alibaba.com/message/distributeChat.htm";return fetch(r,{cache:"no-cache",method:"POST",mode:"cors",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"include",body:Oe({params:JSON.stringify(e),_csrf:t})}).then((function(e){return e.json()})).then((function(e){ge({ext:"weblite_distributeChat_succeed",bizData:Se(Se({},e),{},{token:t})}),n(e)})).catch((function(t){ge({ext:"weblite_distributeChat_failed",bizData:Se(Se({},e),{},{err:t})}),o(t)}))})),w()(d()(o),"resizeChat",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"closechat";if("maxchat"===e&&o.listMeetingPush){var t=Object.assign({},o.listMeetingPush);setTimeout((function(){X.publish("im-weblite-chat:meetingPush",t)}),1e3),o.listMeetingPush=null}o.chatStatus!==e&&(o.chatStatus=e,o.notifyIframe()),"closechat"===e&&ge("weblite_closeChat")})),w()(d()(o),"resizeList",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fold";if(e!==o.listStatus){var t;switch(o.listStatus=e,e){case"expand":o.chatStatus="maxchat",t=Ne[e][0],o._list.classList.add("icbu-weblite-list-expand");break;case"fold":o.chatStatus="closechat",t=Ne[e][0],Ce()&&(t=Ne.expand[0]),o._list.classList.remove("icbu-weblite-list-expand")}t&&o._list.setAttribute("style","width:".concat(t,"px")),o.notifyIframe()}var n="expand"===e?"openatm":"webclick",r={fromuid:"enaliint"+oe.a.getLoginId(),from:1,time:+new Date,version:"new",id:o.webliteConfig.productId,refer:oe.a.refer?oe.a.refer.replace(/&/gi,"$"):""};oe.a.dmtrackLog(n,r)})),w()(d()(o),"handleWindowResize",(function(e){var t,n,o;o=e.type,"show"===e.type?(t="100vw",n="100vh"):(t=770,n=578),window.parent.postMessage(JSON.stringify({type:"meetingChange",width:t,height:n,showType:o}),"*")})),w()(d()(o),"afterInquiryClosed",(function(){X.publish("im-weblite-chat:closeInquiry");var e=localStorage.getItem("InquirySuccessTime");(!e||Date.now()-e>=864e5)&&ge("productDetail_showInquiryFailed")})),w()(d()(o),"afterInquirySent",(function(e){var t=localStorage.getItem("InquirySuccessTime");(!t||Date.now()-t>=864e5)&&(ge("productDetail_showInquirySucceed"),localStorage.setItem("InquirySuccessTime",Date.now()))})),w()(d()(o),"reportSEMLog",(function(e){Ee({productId:e?o.webliteConfig.productId:"",pageType:"atm",siteName:"atm"})})),o.listStatus="fold",o.chatStatus="closechat",o.assignLoginIdEncrypt="",o.webliteConfig={},o}return l()(n,[{key:"componentDidMount",value:function(){var e,t=this;window.host="weblite",window.EventBus=X,ge("visit&site=weblite"),this.isLogin=xe(),this.microAppDidMount(),this.loadInitialMicroApp(re.isWebATM?["conversationList"]:["conversationList","chat"]),this.notifyIframe(),this.heartbeat(),(e=window.messengerAssets||[])&&e.forEach((function(e){var t=document.createElement("link");t.href=e,t.rel="prefetch",document.body.appendChild(t)})),X.on("im-weblite-chat:closeChat",(function(){t.resizeChat("closechat")})),X.on("im-weblite-chat:maximizeChat",(function(){t.resizeChat("maxchat")})),X.on("im-weblite-list:changeListStatus",(function(e){t.resizeList(e.status)})),X.on("im-weblite-chat:sendMessage",(function(e){var n=t.webliteConfig,o=n.activeLoginIdEncrypt,r=void 0===o?"":o,i=n.sceneType,a=void 0===i?"":i,s=e.userInfo&&e.userInfo.toLoginIdEncrypt,c=s===r||s===t.assignLoginIdEncrypt;oe.a.logMsg({toId:e.userInfo&&e.userInfo.toLoginId,productId:e.userInfo&&e.userInfo.productId,opId:e.opId,sceneType:c?a:""}),e.marketData&&oe.a.logMarket(e.userInfo,e.marketData),t.reportSEMLog(c)})),X.on("weblite:notLogin",(function(){window.parent.postMessage(JSON.stringify({type:"LOGIN"}),"*")})),X.on("im-weblite-list:selectedItem",(function(){t.props.isPWA&&(t._landing.classList.add("landing-page-miss"),t._chat.classList.add("icbu-weblite-chat-show"))})),X.on("weblite:windowResize",(function(e){t.handleWindowResize(e)})),X.on("im-weblite-chat:meetingChange",(function(e){var n,o,r;e.ignore||(r=e.type,"show"===e.type?(n="100vw",o="100vh",t.meetingShow=!0):(n=Ne.fold[0],o=Ne.fold[1],t.meetingShow=!1,t._list.setAttribute("style","width:".concat(Ne.fold[0],"px")),X.publish("im-weblite-list:toggleList",{show:!1})),window.parent.postMessage(JSON.stringify({type:"meetingChange",width:n,height:o,showType:r}),"*"))})),X.on("im-weblite-list:meetingPush",(function(e){X.publish("im-weblite-list:selectContact",{activeLoginIdEncrypt:e.contactLoginIdEncrypt}),t.listMeetingPush=e})),window.addEventListener("message",(function(e){var n;try{n=JSON.parse(e.data)}catch(e){}if(!n)return!1;t.handlePostMessage(n)}),!1)}},{key:"notifyIframe",value:function(){if(this.meetingShow)return!1;var e,t;"maxchat"===this.chatStatus?(e=770,t=578):"closechat"===this.chatStatus&&(e=Ne[this.listStatus][0],t=Ne[this.listStatus][1]),e&&t&&window.parent.postMessage(JSON.stringify({type:"CHANGE_SIZE",width:e,height:t}),"*")}},{key:"heartbeat",value:function(){var e=null;(e=document.createElement("script")).type="text/javascript",document.head.appendChild(e),setInterval((function(){e.src="//login.alibaba.com/xlogin/relay.htm?_=".concat(Date.now())}),3e5)}},{key:"selectContact",value:function(e){var t=e.encryptId,n=e.accountId,o=e.clickTimestamp,i=e.chatLoaded,a=this.webliteConfig,s=a.attrs,c=void 0===s?{}:s,u=a.productId,l=void 0===u?"":u,p=a.activeLoginIdEncrypt,d=void 0===p?"":p,f=c.sceneData,m=c.action,h=c.source,g=c.bizId,v=void 0===g?"":g,y=r()(c,Ae);ge("weblite_selectContact&action=".concat(m||"","&source=").concat(h||"")),X.publish("im-weblite-list:selectContact",{productId:l,activeLoginIdEncrypt:t||d,accountId:n,sceneData:f,action:m,source:h,sourceId:v,clickTimestamp:o,chatLoaded:i,others:y})}},{key:"render",value:function(){var e=this,t=ue()({"landing-page":!0}),n=ue()({"icbu-weblite-chat":!0});return O.a.createElement("div",{className:"icbu-weblite",id:"icbu-weblite"},O.a.createElement("div",{id:"icbu-weblite-list",className:"icbu-weblite-list",style:{width:this.props.isPWA?"".concat(Ne.expand[0],"px"):"".concat(Ne.fold[0],"px")},ref:function(t){return e._list=t}}),O.a.createElement("div",{id:"icbu-weblite-chat",className:n,ref:function(t){return e._chat=t}}),this.props.isPWA&&O.a.createElement("div",{className:t,ref:function(t){return e._landing=t}},O.a.createElement(se,{updateChrome:this.props.updateChrome})),this.props.isPWA&&!this.props.isMigrate&&!this.props.updateChrome&&O.a.createElement(_e,{version:"supplier"}))}}]),n}(O.a.Component);function xe(){var e=oe.a.getCookie("xman_us_t")||"";return/sign=y/g.test(e)}function Ce(){return-1!=location.href.indexOf("weblitePWA")||-1!=location.href.indexOf("webATM")}function je(){return-1!==location.href.indexOf("enemberId")}function Me(){return-1!=location.href.indexOf("weblitePWA")&&(e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),(t=!!e&&parseInt(e[2],10))&&t<76);var e,t}Q.a.render(O.a.createElement(Ie,{isPWA:Ce(),updateChrome:Me(),isMigrate:je()}),document.getElementById("app")),Ce()&&window.addEventListener("load",(function(){!function(){var e={webliteConfig:{activeLoginIdEncrypt:"",productId:"",sceneType:"pwa"},type:"weblite:init",refer:location.href,pageId:window.dmtrack_pageid||""};if(je()){var t={},n={};location.search.substr(1).split("&").forEach((function(e){t[e.split("=")[0]]=decodeURIComponent(e.split("=")[1])})),n.activeLoginIdEncrypt=t.enemberId,n.productId=t.pid,n.sceneType=t.sceneType,n.lazyInit=!0,e.webliteConfig=n,e.type="weblite:selectContact"}if(Me())var o=Z.a.alert({needWrapper:!1,content:Re.get("detectChrome"),title:Re.get("detectChromeTitle"),footer:O.a.createElement(te.a,{type:"primary",onClick:function(){return o.hide()}},"OK")});window.postMessage(JSON.stringify(e),"".concat(location.protocol,"//").concat(location.host))}()}));t.default=Ie},function(e,t){},,,,,function(e,t){},,function(e,t){}]);
//# sourceMappingURL=index.js.map